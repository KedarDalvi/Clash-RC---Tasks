{% extends "user/index.html" %}
{% load backend_utils %}
{% load i18n %}
{% load crispy_forms_tags %}
{% load static from staticfiles %}

{% block breadcrumbs %}
{% include 'user/breadcrumbs.html' %}
{% endblock %}

{% block content %}
    <div class="row">
        <div class="span12">
            {% if user.is_authenticated %}
            <p>Hello, <code>{{ user.first_name }}.</code></p>
            <p>{{ user.last_name }}, {{ user.username }}</p>
            <p>You may <a href="{% url 'user:logout' %}">log out</a>.</p>
            {% else %}
            Please <a href="{% url 'user:login' %}">log in</a>.
            {% endif %}
      </div>
    </div>
    {% if user.is_authenticated %}
    <div class="social">
        {% for sublist in available_backends|social_backends %}
        <div class="row">
            {% for name, backend in sublist %}
            {% associated backend %}
            {% if association %}
            <form class="disconnect-form" action="{% url "social:disconnect_individual" backend=association.provider association_id=association.id %}" method="post">{% csrf_token %}
                <a class="col-md-2 btn btn-danger" name="{{ backend|backend_class }}" href="#">
                    <i class="fa fa-{{ name|icon_name }}"></i>
                    Disconnect {{ backend|backend_name }}
                </a>
            </form>
            {% else %}
            <a class="col-md-2 btn btn-default" name="{{ backend|backend_class }}" href="{% url "social:begin" backend=name %}">
                <i class="fa fa-{{ name|icon_name }}"></i>
                {{ backend|backend_name }}
            </a>
            {% endif %}
            {% endfor %}
        </div>
        {% endfor %}
    </div>
    {% endif %}
{% endblock %}

{% block additional_scripts_end %}
<script defer src="{% static "user/home.js" %}>
{% endblock %}

