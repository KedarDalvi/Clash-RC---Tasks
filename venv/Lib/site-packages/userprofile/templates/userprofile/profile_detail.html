{% extends "base.html" %}
{% load i18n %}
{% load backend_utils %}

{% block breadcrumbs %}
{% include 'user/breadcrumbs.html' %}
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-md-6">
            {% if user.is_authenticated %}
            <p>Hello, <code>{{ user.first_name }}.</code></p>
            <p>{{ user.last_name }}, {{ user.username }}</p>
            <p>You may <a href="{% url 'user:logout' %}">log out</a>.</p>
            {% else %}
            Please <a href="{% url 'user:login' %}">log in</a>.
            {% endif %}
        </div>
        <div class="col-md-6">
          <h4>Groups</h4>
            <ul>
              {% for group in user.groups.all %}
              <li>{{ group }}</li>
              {% endfor %}
            </ul>
        </div>
    </div>
    {% if user.is_authenticated %}
    <div class="social">
      {% if available_backends %}
          {% for sublist in available_backends|social_backends %}
          <div class="row">
              {% for name, backend in sublist %}
              {% associated backend %}
              {% if association %}
              <form class="disconnect-form" action="{% url "social:disconnect_individual" backend=association.provider association_id=association.id %}" method="post">{% csrf_token %}
                  <a class="col-md-2 btn btn-danger" name="{{ backend|backend_class }}" href="#">
                      <i class="fa fa-{{ name|icon_name }}"></i>
                      Disconnect {{ backend|backend_name }}
                  </a>
              </form>
              {% else %}
              <a class="col-md-2 btn btn-default" name="{{ backend|backend_class }}" href="{% url "social:begin" backend=name %}">
                  <i class="fa fa-{{ name|icon_name }}"></i>
                  {{ backend|backend_name }}
              </a>
              {% endif %}
              {% endfor %}
          </div>
          {% endfor %}
      {% else %}
      <!-- no available_backends Ã’_o -->
      {% endif %}
    </div>
    {% endif %}
{% endblock %}

{% block additional_scripts_end %}
<script defer src="{{ STATIC_URL }}user/home.js">
{% endblock %}
